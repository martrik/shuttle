<% content_for :breadcrumbs do %>
  <li><a href="<%= deployments_path %>">Deployments</a></li>
  <li>New Deployment</li>
<% end %>

<div class="min-h-screen bg-base-200 py-12 px-4">
  <div class="max-w-2xl mx-auto">
    <div class="card bg-base-100 shadow-xl">
      <div class="card-body">
        <h2 class="card-title">New Deployment</h2>
        <%= form_with url: deployments_path, method: :post, class: "space-y-6" do |f| %>
          <div>
            <label for="project_id" class="label">Railway Project</label>
            <select 
              name="project_id" 
              id="project_id" 
              required
              class="select select-bordered w-full mt-1"
            >
              <option value="">Select a project...</option>
              <% @projects.each do |project| %>
                <option value="<%= project['id'] %>"><%= project['name'] %></option>
              <% end %>
            </select>
            <p class="label mt-1">The Railway project where your deployment will be created</p>
          </div>

          <div>
            <label for="docker_image" class="label">Docker Image</label>
            <input 
              type="text" 
              name="docker_image" 
              id="docker_image" 
              required
              class="input input-bordered w-full mt-1"
              placeholder="e.g., nginx:latest or your-registry/image:tag"
            />
            <p class="label mt-1">Full Docker image name with optional tag</p>
          </div>

          <div class="card-actions justify-end">
            <a href="<%= deployments_path %>" class="btn btn-ghost">
              Cancel
            </a>
            <button type="submit" class="btn btn-primary">
              <%= phosphor_icon "plus", height: 20 %>
              Create Deployment
            </button>
          </div>
        <% end %>
      </div>
    </div>
  </div>
</div>
