<% content_for :breadcrumbs do %>
  <li><a href="<%= deployments_path %>">Deployments</a></li>
  <li>New Deployment</li>
<% end %>

<div class="min-h-screen bg-base-200 py-12 px-4">
  <div class="max-w-2xl mx-auto">
    <div class="card bg-base-100 shadow-xl">
      <div class="card-body">
        <h2 class="card-title">Deploy to Railway</h2>
        <%= form_with url: deployments_path, method: :post, class: "space-y-6" do |f| %>
          <div>
            <label for="project_id" class="label">Railway Project</label>
            <select 
              name="project_id" 
              id="project_id" 
              required
              class="select select-bordered w-full"
            >
              <option value="">Select a project...</option>
              <% @projects.each do |project| %>
                <option value="<%= project['id'] %>"><%= project['name'] %></option>
              <% end %>
            </select>
            <p class="label mt-1">The Railway project where your service will be deployed</p>
          </div>

          <div>
            <label for="docker_image" class="label">Docker Image</label>
            <input 
              type="text" 
              name="docker_image" 
              id="docker_image" 
              required
              class="input input-bordered w-full"
              placeholder="e.g., nginx:latest or your-registry/image:tag"
            />
            <p class="label mt-1">Full Docker image name with optional tag</p>
          </div>

          <div class="card-actions justify-end">
            <a href="<%= deployments_path %>" class="btn btn-ghost">
              Cancel
            </a>
            <button type="submit" class="btn btn-primary">
              <svg xmlns="http://www.w3.org/2000/svg" class="w-5 h-5" fill="currentColor" viewBox="0 0 256 256">
                <path d="M224,128a8,8,0,0,1-8,8H136v80a8,8,0,0,1-16,0V136H40a8,8,0,0,1,0-16h80V40a8,8,0,0,1,16,0v80h80A8,8,0,0,1,224,128Z"/>
              </svg>
              Deploy Service
            </button>
          </div>
        <% end %>
      </div>
    </div>

    <div class="mt-6 text-center">
      <p class="text-sm text-base-content/70">
        Your deployment will be tracked automatically
      </p>
    </div>
  </div>
</div>
